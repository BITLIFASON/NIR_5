# Научно-исследовательская работа: Создание программы для работы с базой данных с использованием программной среды Python.

## Задание

1. Обеспечить выбор из списка субъекта РФ, интересующего пользователя. Составить и отобразить на экране перечень полных наименований вузов, расположенных в выбранном субъекте и осуществляющих заочное обучение студентов.  
2. Обеспечить возможность пользователю выбрать из списка федеральный округ или значение «Все». Для выбранного федерального округа рассчитать и представить в виде таблицы распределение количества студентов по профилям вузов. Таблица должна иметь столбцы: порядковый номер, профиль, количество студентов, обучающихся по данному профилю в выбранном федеральном округе, процент от общего количества студентов в вузах данного федерального округа. Нижняя строка – итоговая: в столбце профиля – значение «все», в столбце «количество студентов» - число студентов в федеральном округе. 

## Структура БД

* Таблица vuzkart

| Ключ                                                                                        | Имя столбца | Тип  данных | Описание                                                                                                                         |
| ------------------------------------------------------------------------------------------- | ----------- | ----------- | -------------------------------------------------------------------------------------------------------------------------------- |
|  :key: | codvuz      | char(6)     | Код вуза                                                                                                                         |
|                                                                                             | z1          | char(200)   | Полное наименование вуза                                                                                                         |
|                                                                                             | z1full      | char(250)   | Полное юридическое наименование вуза                                                                                             |
|                                                                                             | z2          | char(12)    | Сокращённое наименование                                                                                                         |
|                                                                                             | z2ustav     | char(100)   | Сокращённое наименование  по уставу                                                                                              |
|                                                                                             | foundyear   | integer(4)  | Год основания вуза                                                                                                               |
|                                                                                             | z8          | char(110)   | Юридический адрес вуза                                                                                                           |
|                                                                                             | z9          | char(40)    | Справочный телефон вуза                                                                                                          |
|                                                                                             | z12         | char(20)    | Номер факса вуза                                                                                                                 |
|                                                                                             | e\_mail     | char(30)    | Адрес электронной почты                                                                                                          |
|                                                                                             | www         | char(30)    | Адрес официального сайта вуза                                                                                                    |
|                                                                                             | z15         | char(40)    | Ректор вуза                                                                                                                      |
|                                                                                             | region      | char(17)    | Федеральный  округ                                                                                                               |
|                                                                                             | city        | char(20)    | Город                                                                                                                            |
|                                                                                             | status      | char(15)    | Статус  вуза                                                                                                                     |
|                                                                                             | oblname     | char(40)    | Субъект федерации                                                                                                                |
|                                                                                             | gr\_ved     | char(3)     | Категория вуза - принадлежность к ведущим вузам (ФУ – федеральный университет, НИУ – национальный исследовательский университет) |
|                                                                                             | prof        | char(2)     | Профиль вуза: ИТ – инженерно-технический, КЛ – классический университет, ГП – гуманитарно-педагогический, МП - многопрофильный   |

* Таблица vuzstat

| Ключ                                                                                        | Имя столбца | Тип  данных | Описание                                                  |
| ------------------------------------------------------------------------------------------- | ----------- | ----------- | --------------------------------------------------------- |
| :key: | codvuz      | char(6)     | Код вуза                                                  |
|                                                                                             | PPS         | integer(4)  | Численность профессорско-преподавательского состава (ППС) |
|                                                                                             | PR          | integer(4)  | ППС профессора                                            |
|                                                                                             | DC          | integer(4)  | ППС доценты                                               |
|                                                                                             | DN          | integer(4)  | ППС доктора наук                                          |
|                                                                                             | KN          | integer(4)  | ППС кандидаты наук                                        |
|                                                                                             | ZOB         | integer(4)  | Количество зданий-общежитий                               |
|                                                                                             | STUD        | integer(4)  | Количество студентов, всего                               |
|                                                                                             | BAC         | integer(4)  | Обучается по программам бакалавриата                      |
|                                                                                             | SPEC        | integer(4)  | Обучается по программам подготовки специалистов           |
|                                                                                             | MAG         | integer(4)  | Обучается по программам магистратуры                      |
|                                                                                             | ST\_OCH     | integer(4)  | Студентов по очной форме обучения                         |
|                                                                                             | ST\_OCH\_Z  | integer(4)  | Студентов по очно-заочной форме обучения                  |
|                                                                                             | ST\_Z       | integer(4)  | Студентов по заочной форме обучения                       |
|                                                                                             | ASP         | integer(4)  | Аспирантов всего                                          |
|                                                                                             | ASP\_OCH    | integer(4)  | Аспирантов по очной форме обучения                        |

## Инструкция

При запуске программы выводится справочная информация о программе и БД, с которыми предстоит работать.

Для работы с функционалом программы пользователю необходимо выбрать продолжать ли работу с программой, либо выйти из неё.

После этого на экран выводится меню, и программа ожидает выбора пользователем одной из функций приложения.

Далее запускается бесконечный цикл, в котором находится условная конструкция, отвечающая за работу меню программы. Каждый пункт меню отвечает за выполнение определённой функции приложения, так, если в меню был выбран 0, то произойдёт выход из цикла и программа завершит работу; если  выбрана 1, то отобразится текущее содержимое выбранной пользователем таблицы; если в меню был выбрана 2, то выполняется 1 пункт задания, то есть пользователь вводит название одного из субъектов РФ и на экран отображается таблица с полными наименованиями вузов, осуществляющих в нём заочное обучение.; если выбрана 3, то выполняется 2 пункт задания, то есть пользователь вводит название одного из федеральных округов РФ или значение "Все", и на экран отображается таблица распределения количества студентов по профилям в нём.

## Описание алгоритмов

*1. Первый пункт*

Функционал программы для 1 пункта был реализован в виде функции. При её вызове у пользователя запрашивается субъект РФ, далее через SQL запрос, связывающий через JOIN обе таблицы, выбирается столбец `z1` и отбираются строки, имеющие в столбце `oblname` таблицы `vuzkart` введённый субъект и в столбце `ST_Z` таблицы `vuzstat` значение больше 0, после чего на экране отображаются полные наименования вузов, подходящие под заданные условия.

_Документация по функциям:_
* вспомогательные функции:
    - nazv_pol(tblname)
       + Получение имен полей таблицы.
       + tblname – имя таблицы.
       + Возвращаемое значение: кортёж имён полей таблицы.

*	основные функции:
    - choose_sub()
       + Выбор одного из субъектов РФ и отображение полных наименований вузов, осуществляющих в нём заочное обучение.
       + Возвращаемого значения нет.

*2. Второй пункт*

Функционал программы для 2 пункта был реализован в виде функции. При её вызове у пользователя запрашивается федеральный округ или `Все`, далее через SQL запрос, создающий CTE, в котором связаны через JOIN обе таблицы, выбираются столбцы `prof`из таблицы `vuzkart` и `STUD` из `vuzstat` и отбираются строки, имеющие в столбце `region` таблицы `vuzkart` введённый федеральный округ, либо берутся все строки, если пользователь задал значение `Все`, далее в данной таблице происходит группировка с помощью GROUP BY по столбцу `prof` таблицы `vuzkart` и производятся необходимые вычисления с помощью агрегатных функций, после чего на экране отображается таблица распределения количества студентов по профилям.

_Документация по функциям:_
* вспомогательные функции:
  - nazv_pol(tblname)
     + Получение имен полей таблицы.
     + tblname – имя таблицы.
     + Возвращаемое значение: кортёж имён полей таблицы.
* основные функции:
   - choose_okr()
      + Выбор одного из федеральных округов РФ или всех округов, и отображение таблицы распределения количества студентов по профилям в нём.
      + Возвращаемого значения нет.

---

(c) Ларчев Владислав, 2021
